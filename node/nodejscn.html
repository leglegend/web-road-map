<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js入门教程 | 前端学习路线</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/web-road-map/logo.png">
    <meta name="description" content="持续学习，不断学习">
    
    <link rel="preload" href="/web-road-map/assets/css/0.styles.7357bd1b.css" as="style"><link rel="preload" href="/web-road-map/assets/js/app.13fb6d60.js" as="script"><link rel="preload" href="/web-road-map/assets/js/2.1225ca4c.js" as="script"><link rel="preload" href="/web-road-map/assets/js/26.7f6156e2.js" as="script"><link rel="prefetch" href="/web-road-map/assets/js/10.12de4a8c.js"><link rel="prefetch" href="/web-road-map/assets/js/11.edbf6fbd.js"><link rel="prefetch" href="/web-road-map/assets/js/12.2033684f.js"><link rel="prefetch" href="/web-road-map/assets/js/13.8fcecd74.js"><link rel="prefetch" href="/web-road-map/assets/js/14.12d5edae.js"><link rel="prefetch" href="/web-road-map/assets/js/15.29a83edc.js"><link rel="prefetch" href="/web-road-map/assets/js/16.41b1eb54.js"><link rel="prefetch" href="/web-road-map/assets/js/17.bc1a0b98.js"><link rel="prefetch" href="/web-road-map/assets/js/18.ed7e7234.js"><link rel="prefetch" href="/web-road-map/assets/js/19.70e23482.js"><link rel="prefetch" href="/web-road-map/assets/js/20.f38e69fc.js"><link rel="prefetch" href="/web-road-map/assets/js/21.ae3a9747.js"><link rel="prefetch" href="/web-road-map/assets/js/22.3325cd4d.js"><link rel="prefetch" href="/web-road-map/assets/js/23.fcd884a4.js"><link rel="prefetch" href="/web-road-map/assets/js/24.43f49526.js"><link rel="prefetch" href="/web-road-map/assets/js/25.6b939b36.js"><link rel="prefetch" href="/web-road-map/assets/js/27.0f87c827.js"><link rel="prefetch" href="/web-road-map/assets/js/28.a55ffa53.js"><link rel="prefetch" href="/web-road-map/assets/js/3.a04893e0.js"><link rel="prefetch" href="/web-road-map/assets/js/4.6e796031.js"><link rel="prefetch" href="/web-road-map/assets/js/5.60876111.js"><link rel="prefetch" href="/web-road-map/assets/js/6.e66cf383.js"><link rel="prefetch" href="/web-road-map/assets/js/7.ebbb911e.js"><link rel="prefetch" href="/web-road-map/assets/js/8.84dc4039.js"><link rel="prefetch" href="/web-road-map/assets/js/9.73b65006.js">
    <link rel="stylesheet" href="/web-road-map/assets/css/0.styles.7357bd1b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-road-map/" class="home-link router-link-active"><!----> <span class="site-name">前端学习路线</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/web-road-map/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web-road-map/guide/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="/web-road-map/node/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/web-road-map/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/leglegend/web-road-map" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/web-road-map/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web-road-map/guide/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="/web-road-map/node/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/web-road-map/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/leglegend/web-road-map" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web-road-map/node/" aria-current="page" class="sidebar-link">笔记</a></li><li><a href="/web-road-map/node/js-advanced.html" class="sidebar-link">JavaScript高级程序设计</a></li><li><a href="/web-road-map/node/nodejs.html" class="sidebar-link">深入浅出Node.js</a></li><li><a href="/web-road-map/node/html.html" class="sidebar-link">MDN HTML教学</a></li><li><a href="/web-road-map/node/vue3.html" class="sidebar-link">Vue.js设计与实现</a></li><li><a href="/web-road-map/node/http.html" class="sidebar-link">图解HTTP</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-js入门教程"><a href="#node-js入门教程" class="header-anchor">#</a> Node.js入门教程</h1> <p><a href="http://nodejs.cn/learn" target="_blank" rel="noopener noreferrer">Node.js官网入门教程链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="node-js简介"><a href="#node-js简介" class="header-anchor">#</a> Node.js简介</h2> <p>Node.js是一个开源和跨平台的JavaScript运行时环境。
Node.js在浏览器之外运行V8引擎。<br>
Node.js在单线程运行，使用异步I/O。<br> <strong>一个HelloWorld示例：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> hostname <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hello World\n'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> hostname<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Server running at http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="安装node-js"><a href="#安装node-js" class="header-anchor">#</a> 安装Node.js</h2> <p><a href="http://nodejs.cn/download/" target="_blank" rel="noopener noreferrer">下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="node-js-和浏览器的区别"><a href="#node-js-和浏览器的区别" class="header-anchor">#</a> Node.js 和浏览器的区别</h2> <ul><li>没有DOM和BOM等浏览器提供的对象API</li> <li>不用担心浏览器版本</li> <li>使用CommonJS而非ES Modules</li></ul> <h2 id="启动和退出node-js脚本"><a href="#启动和退出node-js脚本" class="header-anchor">#</a> 启动和退出Node.js脚本</h2> <p>通过下面的指令调用：</p> <div class="language-js extra-class"><pre class="language-js"><code>node server<span class="token punctuation">.</span>js
</code></pre></div><p>在控制台运行，可直接通过<code>ctrl-c</code>关闭，或者在代码里调用<code>process.exit()</code>（不建议）。</p> <h2 id="读取环境变量"><a href="#读取环境变量" class="header-anchor">#</a> 读取环境变量</h2> <div class="language-js extra-class"><pre class="language-js"><code>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token comment">// &quot;development&quot;</span>
</code></pre></div><p>该环境变量默认是<code>development</code>，可在脚本运行前将其设置为<code>production</code>，告诉Node.js这是生产环境。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>process不需要require，它是自动可用的。</p></div> <h2 id="从命令行接收参数"><a href="#从命令行接收参数" class="header-anchor">#</a> 从命令行接收参数</h2> <p>当使用node指令启动脚本时，可以传入任意数量的参数。</p> <div class="language-js extra-class"><pre class="language-js"><code>node server<span class="token punctuation">.</span>js foo<span class="token operator">=</span>bar 
</code></pre></div><p>可通过process.argv属性获取这个参数，argv返回一个数组：<br>
['node命令的完整路径','被执行文件的完整路径','参数']
可使用<code>minimist</code>库帮助解析参数</p> <h2 id="输出到命令行"><a href="#输出到命令行" class="header-anchor">#</a> 输出到命令行</h2> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'%s花了%d元买了%i个苹果'</span><span class="token punctuation">,</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 清楚控制台</span>
console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 对打印字符串的次数进行计数</span>
console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 打印堆栈踪迹</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 计算耗时</span>
console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 错误日志</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'\x1b[33m%s\x1b[0m'</span><span class="token punctuation">,</span> <span class="token string">'你好'</span><span class="token punctuation">)</span> <span class="token comment">// 黄色文本</span>
</code></pre></div><h2 id="从命令行接收输入"><a href="#从命令行接收输入" class="header-anchor">#</a> 从命令行接收输入</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span>

readline<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你叫什么名字?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你好 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  readline<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果需要更复杂的输入，推荐使用<code>Inquirer.js</code>。</p> <h2 id="exports"><a href="#exports" class="header-anchor">#</a> exports</h2> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'exports'</span>
<span class="token punctuation">}</span>
<span class="token comment">// or </span>
exports<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'exports'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="npm-包管理器"><a href="#npm-包管理器" class="header-anchor">#</a> npm 包管理器</h2> <p><code>npm install</code>会安装<code>package.json</code>里面所有的依赖到<code>node_modules</code>文件夹中。<br>
也可以通过<code>npm install &lt;package-name&gt;</code>安装特定的包。</p> <ul><li>--save/-S 安装并添加条目到 package.json 文件的 dependencies。</li> <li>--save-dev/-D 安装并添加条目到 package.json 文件的 devDependencies。
<code>npm install --production</code> 生产环境，不会安装dev包。<br> <code>npm update</code>可更新所有包，更新单个包用<code>npm update &lt;package-name&gt;</code>。<br> <code>npm run &lt;task-name&gt;</code>可运行package.json中script属性下的指定任务。<br> <code>npm root -g</code>可查看全局位置。<br> <code>npx &lt;package-name&gt;</code>可运行包。
<code>npm list</code> 查看所有已安装包的最新版本。<br> <code>npm list -g</code> 全局。<br> <code>npm list --depth=0</code> 顶层软件包。<br> <code>npm list &lt;package-name&gt;</code> 具体某个包的版本。<br> <code>npm view &lt;package-name&gt; version</code> 线上最新版本，加s获取所有版本。
<code>npm install &lt;package-name&gt;@&lt;version&gt;</code> 安装某个包的指定版本。
<code>npm uninstall &lt;package-name&gt;</code> 卸载指定包。</li></ul> <h2 id="package-json"><a href="#package-json" class="header-anchor">#</a> package.json</h2> <ul><li>version 表明了当前的版本。</li> <li>name 设置了应用程序/软件包的名称。</li> <li>description 是应用程序/软件包的简短描述。</li> <li>main 设置了应用程序的入口点。</li> <li>private 如果设置为 true，则可以防止应用程序/软件包被意外地发布到 npm。</li> <li>scripts 定义了一组可以运行的 node 脚本。</li> <li>dependencies 设置了作为依赖安装的 npm 软件包的列表。</li> <li>devDependencies 设置了作为开发依赖安装的 npm 软件包的列表。</li> <li>engines 设置了此软件包/应用程序在哪个版本的 Node.js 上运行。</li> <li>browserslist 用于告知要支持哪些浏览器（及其版本）。</li></ul> <h2 id="package-lock-json"><a href="#package-lock-json" class="header-anchor">#</a> package-lock.json</h2> <p>该文件旨在跟踪被安装的每个软件包的确切版本，以便产品可以以相同的方式被 100％ 复制（即使软件包的维护者更新了软件包）。</p> <ul><li><code>〜0.13.0</code>，只更新版本补丁，0.13.1可以，0.14.0不行</li> <li><code>^0.13.0</code>，更新版本和补丁</li> <li><code>0.13.0</code>，不更新
package-lock.json会固化当前安装的每个包的版本，<code>npm install</code>时，npm会使用这些确切的版本。<br>
当运行<code>npm update</code>时，package-lock.json文件中的依赖的版本会被更新，package.json不会变。</li></ul> <h2 id="包运行器-npx"><a href="#包运行器-npx" class="header-anchor">#</a> 包运行器 npx</h2> <p><code>npx</code>可以运行使用Node.js构建并通过npm仓库发布的代码。</p> <h2 id="事件循环"><a href="#事件循环" class="header-anchor">#</a> 事件循环</h2> <p>事件循环(Event loops)负责执行代码、收集和处理事件以及执行队列中的子任务。<br>
调用栈(Call Stack)是一个LIFO队列（后进先出）。<br>
每次迭代中的事件循环都会查看调用堆栈中是否有东西并执行它直到调用栈为空。<br>
steTimeout或者用户触发事件会被放入消息队列(任务队列)中。<br>
事件循环会优先处理调用栈中的所有消息(任务)，当调用堆栈为空时，它才会处理消息队列的任务。<br>
微任务(Microttasks)，每当调用栈为空时，微任务队列中的每一个任务会被依次执行，新添加的任务也会在下一个宏任务执行前执行。</p> <h2 id="process-nexttick"><a href="#process-nexttick" class="header-anchor">#</a> process.nextTick()</h2> <p>将一个函数传给<code>process.nextTick()</code>时，则指示引擎在当前操作结束（在下一个事件循环滴答开始之前）时调用此函数。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 1 2 3 4 5 6</span>
</code></pre></div><h2 id="javascript-异步编程与回调"><a href="#javascript-异步编程与回调" class="header-anchor">#</a> JavaScript 异步编程与回调</h2> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> async/await</h2> <h2 id="node-js-事件触发器"><a href="#node-js-事件触发器" class="header-anchor">#</a> Node.js 事件触发器</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> eventEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始'</span><span class="token operator">+</span>number<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>once</code> 单词监听</li> <li><code>removeListener</code>/<code>off</code> 从事件中移除事件监听器</li> <li><code>removeAllListeners</code> 移除事件的所有监听器</li></ul> <h2 id="搭建http服务器"><a href="#搭建http服务器" class="header-anchor">#</a> 搭建HTTP服务器</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span> <span class="token comment">// 引入http模块</span>

<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span> <span class="token comment">// 设置端口号</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 创建服务器</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'你好世界\n'</span><span class="token punctuation">)</span> <span class="token comment">// 返回</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 监听</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">服务器运行在 http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="发送http请求"><a href="#发送http请求" class="header-anchor">#</a> 发送HTTP请求</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'nodejs.cn'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">443</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/todos'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">状态码: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>statusCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

req<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>使用axios可以简化很多：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span>

axios
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://nodejs.cn/todos'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">todo</span><span class="token operator">:</span> <span class="token string">'做点事情'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">状态码: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>statusCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="文件描述符"><a href="#文件描述符" class="header-anchor">#</a> 文件描述符</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'/Users/joe/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//fd 是文件描述符。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>r</code>  打开文件用于读取。</li> <li><code>r+</code> 打开文件用于读写。</li> <li><code>w+</code> 打开文件用于读写，将流定位到文件的开头。如果文件不存在则创建文件。</li> <li><code>a</code>  打开文件用于写入，将流定位到文件的末尾。如果文件不存在则创建文件。</li> <li><code>a+</code> 打开文件用于读写，将流定位到文件的末尾。如果文件不存在则创建文件。
<code>fs.open()</code>可以同步打开文件。</li></ul> <h2 id="文件属性"><a href="#文件属性" class="header-anchor">#</a> 文件属性</h2> <p>用Node查看文件的详细信息：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'./server.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>stats.isFile()</code> 是否为文件</li> <li><code>stats.isDirectory()</code> 是否为目录(文件夹)</li> <li><code>stats.isSymbolicLink()</code> 是否为符号链接</li> <li><code>stats.size</code> 获取文件大小</li></ul> <h2 id="文件路径"><a href="#文件路径" class="header-anchor">#</a> 文件路径</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token string">'/Users/joe/test.txt'</span>
path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token comment">// '/Users/joe'</span>
path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token comment">// 'test.txt'</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token comment">// '.txt'</span>

path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>notes<span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//test</span>

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'test.txt'</span><span class="token punctuation">)</span> <span class="token comment">// '/Users/joe/test.txt'</span>
</code></pre></div><p><code>path.resolve()</code> 获得相对路径的绝对路径计算。</p> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./test.txt'</span><span class="token punctuation">)</span> <span class="token comment">// 将test.txt附加到当前工作目录上</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'tmp'</span><span class="token punctuation">,</span> <span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token comment">// 将tmp/test.txt附加到当前工作目录上</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/tmp'</span><span class="token punctuation">,</span> <span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token comment">// /tmp/test.txt</span>
</code></pre></div><p><code>path.normalize()</code>  当包含诸如 <code>.</code>、<code>..</code> 或<code>双斜杠</code>之类的相对说明符时，其会尝试计算实际的路径。</p> <h2 id="读取文件"><a href="#读取文件" class="header-anchor">#</a> 读取文件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/Users/joe/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>fs.readFileSync()</code> 可以同步读取。<br>
这两个方法都会将文件的全部内容读取到内存中，大文件最好用流来读取文件的内容。</p> <h2 id="写入文件"><a href="#写入文件" class="header-anchor">#</a> 写入文件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token string">'一些内容'</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'/Users/joe/test.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token string">'a+'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//文件写入成功。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>fs.writeFileSync()</code> 可以同步写入。<code>flag</code>可传入以下几项：</p> <ul><li><code>r+</code> 打开文件用于读写。</li> <li><code>w+</code> 打开文件用于读写，将流定位到文件的开头。如果文件不存在则创建文件。</li> <li><code>a</code>  打开文件用于写入，将流定位到文件的末尾。如果文件不存在则创建文件。</li> <li><code>a+</code> 打开文件用于读写，将流定位到文件的末尾。如果文件不存在则创建文件。
<strong>将内容追加到文件末尾:</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token string">'一些内容'</span>

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'file.log'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//完成！</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>fs.appendFileSync()</code> 可以异步追加。</p> <h2 id="使用文件夹"><a href="#使用文件夹" class="header-anchor">#</a> 使用文件夹</h2> <ul><li><code>fs.access()</code> 检查文件夹是否存在以及 Node.js 是否具有访问权限。</li> <li><code>fs.mkdir()</code> 或 <code>fs.mkdirSync()</code> 可以创建新的文件夹。</li> <li><code>fs.readdir()</code> 或 <code>fs.readdirSync()</code> 可以读取目录的内容（全部的文件和子文件夹）。</li> <li><code>fs.rename()</code> 或 <code>fs.renameSync()</code> 可以重命名文件夹。</li> <li><code>fs.rmdir()</code> 或 <code>fs.rmdirSync()</code> 可以删除文件夹。</li></ul> <h2 id="路径模块"><a href="#路径模块" class="header-anchor">#</a> 路径模块</h2> <p>除了之前介绍的，还有下面几个：</p> <ul><li><code>path.parse()</code> 解析对象的路径为组成其的片段。</li> <li><code>path.relative()</code> 两个参数，基于当前工作目录，返回从第一个路径到第二个路径的相对路径。</li> <li><code>path.isAbsolute()</code> 如果是绝对路径，则返回 true。</li></ul> <h2 id="操作系统模块"><a href="#操作系统模块" class="header-anchor">#</a> 操作系统模块</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="事件模块"><a href="#事件模块" class="header-anchor">#</a> 事件模块</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> door <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

door<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The door is open'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// door.addListener()效果一样</span>

door<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 触发事件</span>
door<span class="token punctuation">.</span><span class="token function">eventNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回door身上注册事件的数组</span>
door<span class="token punctuation">.</span><span class="token function">getMaxListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 最大监听数量</span>
door<span class="token punctuation">.</span><span class="token function">listenerCount</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 获取指定事件监听器的数量</span>
door<span class="token punctuation">.</span><span class="token function">listeners</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 返回监听器数组</span>
door<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 取消监听 同removeListener()</span>
door<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 只监听一次</span>
door<span class="token punctuation">.</span><span class="token function">prependListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 在监听器数组的开头添加一个监听器</span>
door<span class="token punctuation">.</span><span class="token function">prependOnceListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 在监听器数组的开头添加一个监听器，只监听一次</span>
door<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">)</span> <span class="token comment">// 删除指定事件的所有监听器</span>
door<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 删除指定事件的指定监听器</span>
door<span class="token punctuation">.</span><span class="token function">setMaxListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 设置最大监听数量</span>
</code></pre></div><h2 id="http-模块"><a href="#http-模块" class="header-anchor">#</a> http 模块</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个服务器，返回http.Server实例</span>
http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个请求，返回http.ClientRequest实例</span>
http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 自动地设置 HTTP 方法为 GET，并自动地调用req.end()。</span>
</code></pre></div><p><strong>http.Server：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回http.Server实例</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span>fn<span class="token punctuation">)</span> <span class="token comment">// 启动 HTTP 服务器并监听连接。</span>
server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">// 关闭服务器。</span>
</code></pre></div><p><strong>http.IncomingMessage和http.ServerResponse：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//req 是一个 http.IncomingMessage 对象。</span>
  <span class="token comment">//res 是一个 http.ServerResponse 对象。</span>
  req<span class="token punctuation">.</span><span class="token function">statusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回响应状态码</span>
  req<span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回响应头</span>
  req<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回请求方法</span>
  req<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回请求的 URL</span>
  req<span class="token punctuation">.</span><span class="token function">httpVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回请求的 HTTP 版本</span>

  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">500</span>
  res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">'内部服务器错误'</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'headername'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment">// 设置 HTTP 消息头的值</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span>statusCode<span class="token punctuation">,</span> headers<span class="token punctuation">)</span> <span class="token comment">// 设置 HTTP 响应头和状态码</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 发送响应内容并关闭连接</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="buffer"><a href="#buffer" class="header-anchor">#</a> Buffer</h2> <p>它表示在 V8 JavaScript 引擎外部分配的固定大小的内存块。</p> <h2 id="流"><a href="#流" class="header-anchor">#</a> 流</h2> <p>在传统的方式中，当告诉程序读取文件时，这会将文件从头到尾读入内存，然后进行处理。使用流，则可以逐个片段地读取并处理（而无需全部保存在内存中）。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/web-road-map/assets/js/app.13fb6d60.js" defer></script><script src="/web-road-map/assets/js/2.1225ca4c.js" defer></script><script src="/web-road-map/assets/js/26.7f6156e2.js" defer></script>
  </body>
</html>
